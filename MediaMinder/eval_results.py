# AUTOGENERATED! DO NOT EDIT! File to edit: ../nbs/04_eval_result.ipynb.

# %% auto 0
__all__ = ['client', 'eval_result']

# %% ../nbs/04_eval_result.ipynb 2
import os
from groq import AsyncGroq
from rich.pretty import pprint
import MediaMinder.search as search

# %% ../nbs/04_eval_result.ipynb 3
client = AsyncGroq(
    # This is the default and can be omitted
    api_key=os.environ.get("GROQ_API_KEY"),
)


async def eval_result(result: search.SearchResult, filter_str: str):
    user_prompt = f"""Given the following title: 
'{result.title}'
and the following summary:
"{result.content}"

Answer yes if this article is definitely about {filter_str}, no if this article is not about {filter_str}, and maybe if you cannot answer this question from the context alone."""

    chat_completion = await client.chat.completions.create(
        messages=[
            {
                "role": "system",
                "content": "You are a helpful media analyzing bot who can answer questions about companies or topics mentioned in media articles or summaries.",
            },
            {
                "role": "user",
                "content": user_prompt,
            },
        ],
        temperature=0.1,
        model="llama3-70b-8192",
    )
    return chat_completion.choices[0].message.content
